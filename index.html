<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è§‚è±¡ - å…¨æ¯æ¨æ¼”ç³»ç»Ÿ</title>
    <style>
        :root { --paper-bg: #fdfaf4; --ink-black: #2c2c2c; --seal-red: #b22222; }
        body { background-color: var(--paper-bg); color: var(--ink-black); font-family: "PingFang SC", serif; margin: 0; display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        .header { margin-top: 30px; text-align: center; }
        .title { font-size: 3rem; color: var(--seal-red); font-weight: bold; margin: 0; letter-spacing: 10px; }
        .container { width: 95%; max-width: 800px; padding: 20px; background: rgba(255, 255, 255, 0.7); border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); margin-top: 20px; }
        .input-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px; }
        .input-group { text-align: left; }
        label { display: block; margin-bottom: 5px; font-weight: bold; font-size: 0.9rem; color: #444; }
        input, select { padding: 10px; border: 1px solid #ccc; border-radius: 4px; width: 100%; box-sizing: border-box; font-size: 1rem; }
        button { background-color: var(--seal-red); color: white; padding: 15px 40px; border: none; border-radius: 30px; cursor: pointer; font-size: 1.1rem; width: 100%; transition: all 0.3s; box-shadow: 0 4px 10px rgba(178, 34, 34, 0.3); }
        button:hover { transform: translateY(-2px); box-shadow: 0 6px 15px rgba(178, 34, 34, 0.4); }
        #resultArea { margin-top: 25px; display: none; }
        .gua-card { background: #fff; padding: 20px; border-radius: 10px; border: 1px solid #eee; margin-bottom: 15px; }
        .gua-title { color: var(--seal-red); border-bottom: 2px solid var(--seal-red); padding-bottom: 5px; margin-bottom: 15px; font-size: 1.2rem; }
        .category-box { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.9rem; }
        .category-item { background: #f9f9f9; padding: 10px; border-left: 3px solid #ccc; }
        .disclaimer { font-size: 0.8rem; color: #999; margin: 30px 0; text-align: center; }
    </style>
</head>
<body>

    <div class="header">
        <h1 class="title">è§‚è±¡</h1>
        <p style="letter-spacing: 5px; color: #666;">å…¨æ¯é€»è¾‘ Â· æ¨æ¼”ç³»ç»Ÿ</p>
    </div>

    <div class="container">
        <div class="input-grid">
            <div class="input-group">
                <label>æ ¸å¿ƒæ•°å­— (å¿…å¡«)</label>
                <input type="number" id="numInput" placeholder="å¦‚ï¼š888">
            </div>
            <div class="input-group">
                <label>é€‰æ‹©æ—¶è¾°</label>
                <select id="timeSelect">
                    <option value="0">è‡ªåŠ¨ (å½“å‰ç³»ç»Ÿ)</option>
                    <option value="1">å­ (23-01)</option><option value="2">ä¸‘ (01-03)</option>
                    <option value="3">å¯… (03-05)</option><option value="4">å¯ (05-07)</option>
                    <option value="5">è¾° (07-09)</option><option value="6">å·³ (09-11)</option>
                    <option value="7">åˆ (11-13)</option><option value="8">æœª (13-15)</option>
                    <option value="9">ç”³ (15-17)</option><option value="10">é…‰ (17-19)</option>
                    <option value="11">æˆŒ (19-21)</option><option value="12">äº¥ (21-23)</option>
                </select>
            </div>
            <div class="input-group">
                <label>æ–¹ä½æ„Ÿåº” (å¯é€‰)</label>
                <select id="directionInput">
                    <option value="0">æ— ç‰¹å®šæ–¹ä½</option>
                    <option value="1">è¥¿åŒ— (ä¹¾)</option><option value="8">è¥¿å— (å¤)</option>
                    <option value="6">æ­£å— (ç¦»)</option><option value="2">æ­£åŒ— (å)</option>
                </select>
            </div>
            <div class="input-group">
                <label>äººç‰©æ„Ÿåº” (å¯é€‰)</label>
                <select id="peopleInput">
                    <option value="0">æ— ç‰¹å®šäººç‰©</option>
                    <option value="1">é•¿è¾ˆ/ä¸Šçº§</option><option value="2">å¹³è¾ˆ/æœ‹å‹</option>
                    <option value="3">æ™šè¾ˆ/ä¸‹å±</option>
                </select>
            </div>
        </div>
        <div class="input-group" style="margin-bottom: 20px;">
            <label>æ±‰å­—/å¿µå¤´æ„Ÿåº” (è¾“å…¥æ–‡å­—)</label>
            <input type="text" id="textInput" placeholder="è¾“å…¥å½“å‰è„‘æµ·ä¸­çš„è¯æ±‡...">
        </div>

        <button onclick="startInference()">å¼€å¯å…¨æ¯æ¨æ¼”</button>

        <div id="resultArea"></div>
    </div>

    <div class="disclaimer">
        å­¦æœ¯æ¢è®¨ï¼Œè¯·ç†æ€§çœ‹å¾…ã€‚ç›¸ä¿¡ç§‘å­¦ï¼Œè¿œç¦»è¿·ä¿¡ã€‚
    </div>

    <script>
        const guaNames = ["", "ä¹¾ä¸ºå¤©", "å¤ä¸ºåœ°", "æ°´é›·å±¯", "å±±æ°´è’™", "æ°´å¤©éœ€", "å¤©æ°´è®¼", "åœ°æ°´å¸ˆ", "æ°´åœ°æ¯”", "é£å¤©å°ç•œ", "å¤©æ³½å±¥", "åœ°å¤©æ³°", "å¤©åœ°å¦", "å¤©ç«åŒäºº", "ç«å¤©å¤§æœ‰", "åœ°å±±è°¦", "é›·åœ°è±«", "æ³½é›·éš", "å±±é£è›Š", "åœ°æ³½ä¸´", "é£åœ°è§‚", "ç«é›·å™¬å—‘", "å±±ç«è´²", "å±±åœ°å‰¥", "åœ°é›·å¤", "å¤©é›·æ— å¦„", "å±±å¤©å¤§ç•œ", "å±±é›·é¢", "æ³½é£å¤§è¿‡", "åä¸ºæ°´", "ç¦»ä¸ºç«", "æ³½å±±å’¸", "é›·é£æ’", "å¤©å±±é", "é›·å¤©å¤§å£®", "ç«åœ°æ™‹", "åœ°ç«æ˜å¤·", "é£ç«å®¶äºº", "ç«æ³½ç½", "æ°´å±±è¹‡", "é›·æ°´è§£", "å±±æ³½æŸ", "é£é›·ç›Š", "æ³½å¤©å¤¬", "å¤©é£å§¤", "æ³½åœ°èƒ", "åœ°é£å‡", "æ³½æ°´å›°", "æ°´é£äº•", "æ³½ç«é©", "ç«é£é¼", "éœ‡ä¸ºé›·", "è‰®ä¸ºå±±", "é£å±±æ¸", "é›·æ³½å½’å¦¹", "é›·ç«ä¸°", "ç«å±±æ—…", "å·½ä¸ºé£", "å…‘ä¸ºæ³½", "é£æ°´æ¶£", "æ°´æ³½èŠ‚", "é£æ³½ä¸­å­š", "é›·å±±å°è¿‡", "æ°´ç«æ—¢æµ", "ç«æ°´æœªæµ"];

        // ç®€æ˜“å¦åºè½¬æ¢è¡¨ï¼ˆæ¢…èŠ±æ˜“æ•° 1-8 å¯¹åº” ä¹¾-å¤ï¼‰
        const symbolMap = { 1:"ä¹¾", 2:"å…‘", 3:"ç¦»", 4:"éœ‡", 5:"å·½", 6:"å", 7:"è‰®", 8:"å¤" };

        function startInference() {
            const numStr = document.getElementById('numInput').value;
            const textStr = document.getElementById('textInput').value;
            if(!numStr && !textStr) { alert("è¯·è‡³å°‘è¾“å…¥æ•°å­—æˆ–æ„Ÿåº”æ±‰å­—"); return; }

            // 1. è·å–åŸºç¡€æ•°å€¼
            let baseNum = parseInt(numStr) || 0;
            if(textStr) baseNum += textStr.length; // æ±‰å­—ç¬”ç”»é€»è¾‘ç®€åŒ–
            
            let timeVal = parseInt(document.getElementById('timeSelect').value);
            if(timeVal === 0) {
                let hour = new Date().getHours();
                timeVal = Math.floor((hour + 1) % 24 / 2) + 1;
            }

            // 2. æ¢…èŠ±æ˜“æ•°èµ·å¦ç®—æ³•
            let upper = (baseNum + parseInt(document.getElementById('directionInput').value)) % 8 || 8;
            let lower = (baseNum + timeVal + parseInt(document.getElementById('peopleInput').value)) % 8 || 8;
            let moveYao = (baseNum + timeVal) % 6 || 6;

            // 3. ç»“æœæ˜¾ç¤º
            const resArea = document.getElementById('resultArea');
            resArea.style.display = 'block';
            
            // æ­¤å¤„ç”±äºé€»è¾‘å¤æ‚ï¼Œä»…ä½œæ ¸å¿ƒç»“æœå±•ç¤º
            resArea.innerHTML = `
                <div class="gua-card">
                    <div class="gua-title">â˜¯ å¦è±¡æ¨æ¼”ç»“æœ</div>
                    <p><b>èµ·å¦æ•°ï¼š</b>${baseNum} | <b>æ—¶è¾°ï¼š</b>${timeVal} | <b>åŠ¨çˆ»ï¼š</b>${moveYao}çˆ»</p>
                    <p style="font-size:1.3rem; text-align:center;">
                        æœ¬å¦ï¼š<span style="color:var(--seal-red)">${guaNames[upper*2]}</span> 
                        <span style="color:#ccc"> â” </span> 
                        å˜å¦ï¼š<span style="color:var(--seal-red)">${guaNames[lower*3 % 64 + 1]}</span>
                    </p>
                </div>

                <div class="gua-card">
                    <div class="gua-title">ğŸ“œ åˆ†ç±»è§£æ (å­¦æœ¯æ¢è®¨)</div>
                    <div class="category-box">
                        <div class="category-item"><b>äº‹ä¸šåŠŸåï¼š</b>å®œå®ˆæ­£ä¸é˜¿ï¼Œå¾ªåºæ¸è¿›ã€‚</div>
                        <div class="category-item"><b>é’±è´¢æ±‚åˆ©ï¼š</b>å½“ä¸‹å¹³ç¨³ï¼Œé˜²èŒƒå°äººäº‰åˆ©ã€‚</div>
                        <div class="category-item"><b>å§»ç¼˜æƒ…æ„Ÿï¼š</b>å¤šæ²Ÿé€šæ„Ÿåº”ï¼Œå…¨æ¯äº’é€šã€‚</div>
                        <div class="category-item"><b>å¥åº·ç–¾å„ï¼š</b>æ³¨æ„æ°”è¡€é¡ºç•…ï¼Œç›¸ä¿¡ç§‘å­¦ã€‚</div>
                    </div>
                </div>
            `;
            
            // è‡ªåŠ¨æ»šåŠ¨åˆ°ç»“æœ
            resArea.scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>
